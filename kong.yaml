_format_version: "1.1"

services:
  - name: faktum
    url: http://faktum.default.svc.nais.local
    plugins:
      - name: key-auth
      - name: correlation-id
      - name: syslog
    routes:
    - name: faktum-route
      methods:
        - GET
      paths:
        - /faktum
      hosts:
        - faktum.default.svc.nais.local
  - name: admin-api
    host: 0.0.0.0
    port: 8001
    plugins:
      - name: acl
        config:
          whitelist:
            - kong-admin-group
          hide_groups_header: true
      - name: key-auth
      - name: correlation-id
      - name: syslog
    routes:
    - name: kong-admin-route
      paths:
        - /admin-api

consumers:
  - username: my-user
    keyauth_credentials:
      - key: my-key
  - username: admin1
    keyauth_credentials:
      - key: admin-key
    acls:
      - group: kong-admin-group

plugins:
  - name: syslog
  - name: correlation-id
    config:
      header_name: Kong-Request-ID
      generator: uuid#counter
      echo_downstream: true
  - name: key-auth
    config:
      hide_credentials: false
  - name: bot-detection

